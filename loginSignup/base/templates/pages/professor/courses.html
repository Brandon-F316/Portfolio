{% extends "pages/main.html" %}
{% block content %}
<style>
  .message {
    color: red;
    font-size: 0.9rem;
    text-align: center;
        }
</style>

<h2>Your Assigned Courses</h2>
<ul>
  {% if my_courses %}
    {% for course in my_courses %}
      <li>{{ course.course_id }} â€“ {{ course.semester }} {{ course.year }}</li>
    {% endfor %}
  {% else %}
    <li>You have no assigned courses.</li>
  {% endif %}
</ul>

<hr>

{% for message in messages %}
<p class="message">{{ message }}</p>
{% endfor %}

<form method="post" id="assign-course-form">
  {% csrf_token %}

  <label for="course">Select a Course:</label>
  <select id="course" name="base_course_id">
    {% for course in courses %}
      <option value="{{ course.course_id }}">
        {{ course.course_id }}
      </option>
    {% endfor %}
  </select>

  <div>
    {{ form.year.label_tag }}
    {{ form.year }}
  </div>

  <div>
    <label for="semester">Select Semester:</label>
    <select id="semester" name="semester">
      <option value="Spring">Spring</option>
      <option value="Summer">Summer</option>
      <option value="Fall">Fall</option>
      <option value="Winter">Winter</option>
    </select>
  </div>

  <input type="hidden" name="course_id" id="course_id">

  <button type="submit">Assign Me to Course</button>
</form>

<script>
document.getElementById('assign-course-form')
  .addEventListener('submit', function(e) {
    const base = document.getElementById('course').value;
    const year = document.querySelector('input[name="year"]').value;
    document.getElementById('course_id').value = `${base}(${year})`;
  });
</script>

{% endblock content %}
